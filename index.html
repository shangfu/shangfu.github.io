
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>何以算法</title>
  <meta name="author" content="WhyAlgorithm">

  
  <meta name="description" content="今天通宵看完了李世石对战AlphaGo的第四场。很不容易，感谢李世石能赢上一盘。 AI就像一列迎面开来的火车。它临近，我听到了轰隆隆的声音。我在不断期待着它的到来。
它终于到了，在它一闪而过并远远地把人类抛在身后之前，我希望它能在我身边停留哪怕一小会&mdash;&mdash;因为我想上车！
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://whyalgorithm.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="何以算法" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-56762509-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">何以算法</a></h1>
  
    <h2>WhyAlgorithm</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="whyalgorithm.com/" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/category/">Category</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/03/13/alphago/">对战AlphaGo的首胜</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-13T08:56:02+00:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>8:56 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天通宵看完了李世石对战AlphaGo的第四场。很不容易，感谢李世石能赢上一盘。</p>

<p>AI就像一列迎面开来的火车。它临近，我听到了轰隆隆的声音。我在不断期待着它的到来。
它终于到了，在它一闪而过并远远地把人类抛在身后之前，我希望它能在我身边停留哪怕一小会&mdash;&mdash;因为我想上车！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/31/interest-me-of-dec-2015/">Interest Me in Dec. 2015</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-31T17:06:43+00:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>5:06 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Facebook 2015 year in review, <a href="http://yearinreview.fb.com/2015/">HERE</a></h3>

<h3>Satoshi is probably Craig Wright, who is an Australian genius. However, Satoshi claimed Craig Wright is not him through his famous email account.  &ldquo;Satoshi&rdquo; perhaps means a group.</h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/01/interest-me-of-nov-2015/">Interest Me in Nov. 2015</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-01T19:31:33+00:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:31 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Formula E announces ‘Roborace,’ the first driverless car race series</h3>

<h3>How Uber engineers an efficient route, <a href="https://eng.uber.com/engineering-an-efficient-route/">HERE</a></h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/12/generate-geographical-heat-map/">Generating Geographical Heat Map</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-12T23:26:14+00:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:26 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/01/interest-me-of-oct-2015/">Interest Me in Oct. 2015</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-01T20:15:36+00:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>8:15 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Nobel Prizes</h3>

<h3>Real games using Oculus Rift in Oculus Connect 2015</h3>

<h3>Tesla Model X</h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/30/interest-me-of-sep-2015/">Interest Me in Sep. 2015</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-30T14:45:05+00:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:45 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>NASA confirms evidence that Liquid Water Flows (with hydrated salts) on Today’s Mars</h3>

<p>Lujendra Ojha (PhD student),  Mary Beth Wilhelm (NASA researcher),  Jim Green (big man),
Michael Meyer (big man), Alfred McEwen (big man) attended the NASA news conference.</p>

<h3>Terence Tao posted his solution for the Erdos discrepancy problem</h3>

<p>They show that for <strong>any</strong> sequence \( f: N \rightarrow \{-1,1\} \),  the discrepancy of \(f\) is finite, i.e., \(
\sup_{n,d \in N}{  \sum_{j=1}^{n} f(jd)  }
\)</p>

<h3>Google showcased their driverless cars</h3>

<p>Google’s driverless car team showcased their progress  during a live stream broadcast
from San Francisco, explaining they are close to having a system as efficient as a computer
but with humanlike abilities to spot cues like hand signals and avoid accidents.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/31/back-in-the-future/">在未来醒来</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-31T18:48:08+00:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>6:48 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p style="text-align:center;"><img src="/images/time.jpg" alt="" /></p>

<h2>背景</h2>

<p>随着《三体》获得雨果奖最佳长篇小说，以及电影的杀青，《三体》应该算是彻底进入大众视野了。
如果读过的人，肯定对其中贯穿三部曲的冷藏技术印象深刻，这应该是整部小说中描写最细致入微的技术了，
最近才知道原来该YY科技早已在现实人类社会中存在，并且有组织，有服务，有标价。
更早在1967年，就有了史上第一个自愿进行人体冷藏的人，<a href="https://en.wikipedia.org/wiki/James_Bedford">James Bedford</a>。
参考Wiki， <a href="https://en.wikipedia.org/wiki/Alcor_Life_Extension_Foundation">Alcor Life Extension Foundation</a> （Alcor）
是美国最大的进行人体冷冻的研究组织。截止15年7月底，总共有139个人正在被<a href="https://en.wikipedia.org/wiki/Cryopreservation">低温储藏</a>，
其中86人是仅<a href="https://en.wikipedia.org/wiki/Neuropreservation">大脑储藏</a>。
<a href="http://www.alcor.org/BecomeMember/scheduleA.html">价格</a>方面也是比想象中便宜（对比传说中的北京墓地），</p>

<blockquote><p>Minimum Cryopreservation Funding:</p>

<p>$200,000.00 Whole Body Cryopreservation ($115,000 to the Patient Care Trust, $60,000 for cryopreservation, $25,000.00 to the CMS Fund).</p>

<p>$ 80,000.00 Neurocryopreservation ($25,000 to the Patient Care Trust, $30,000 for cryopreservation, $25,000.00 to the CMS Fund).</p></blockquote>

<h2>问题</h2>

<p>多么美好的前景，感觉人类要突破生命壁垒的节奏。但是，
再稍微游览下相关技术，发现还是有<a href="https://en.wikipedia.org/wiki/Cryonics#Obstacles_to_success">很长的路要走</a>。
就目前技术而言，能低温保存的只有血液、细胞和人体器官。且若要保存单个人体器官仍然非常困难。
另外，现时也没有实验能证明，在冷冻一段长时间后，细胞仍可以保存完好。
一些学者认为人体冷冻技术是“制作现代木乃伊（Modern mummies）的技术”。
简而言之，现在这伙人是抱着有枣没枣打三杆的心态，把难题抛给未来。</p>

<h2>考虑</h2>

<p>个人还是很看好这个技术的。希望在有生之年应该可以见证到。
带着这样的想法，作为非生命科学专业的人，我更关心的是若要在未来醒来，要做好什么样的准备？
我觉得有四个方面需要讨论，1）为什么要去未来，2）醒来的时间点，3）醒来后的生存问题，4）临睡前的准备。以下仅给出
我暂时能想到的。</p>

<h4>1. 为什么要去未来</h4>

<ul>
<li>想活得更久</li>
<li>迫不得已：疾病，残疾。</li>
<li>厌世或者猎奇</li>
</ul>


<h4>2. 醒来的时间点</h4>

<ul>
<li>想活得更久之人： 如果某人A想生存X年，比如X=500，那么A应该会一直沉睡到人类平均寿命达到X年的时候醒来。这里X可以趋近于无穷大。
一个假设是人类的科技水平跟人类的平均寿命X是成正比的。由于地球资源的限制，人类应该在平均寿命达到Y年之前，主动或者被迫地脱离地球寻找
新的生存地。至于这个Y的具体值是多少，我不知道，猜测应该不超过200。以下是我随便在网上搜的历代平均年龄：

<blockquote><p>夏代，18岁；秦汉，20岁；东汉，22岁；唐朝，27岁；宋代，30岁；清代33岁；民国时期35岁；新中国1957年，57岁；1981年，68岁</p></blockquote></li>
</ul>


<p>对比现代和2000年前的科技水平以及对应的平均年龄，我对人类在平均200岁之前进入太空殖民时代是有信心的。
所以如果A的X越大，沉睡的时间越久，人类科技水平越高，生存
范围越广。</p>

<ul>
<li><p>迫不得已之人：在解决该问题（疾病）的技术成熟的时候醒来，醒来后问题得到解决。开始在未来生活。这个时间点变数很大。</p></li>
<li><p>厌世和猎奇之人： 这类人醒来的时间至少是世界有了大的变革之后吧。</p></li>
</ul>


<h4>3. 醒来后的生存问题</h4>

<p>不论哪种人，醒来后的科技水平肯定是超越当前至少一个科技革命的。面对跨越了一个科技革命的时代，现代人该如何生存，又可以做什么呢？
首先得认识到，不论你在当前社会处在哪个阶层，在未来醒来，你的社会阶层都会跌落好几个等级。
因为在未来，我们没有社会关系，没有社会资源，也没有专业的知识。
我们的心理年龄是中年人，甚至是老年人，但我们的生理年龄和专业年龄可能只是个小孩。
这是最令人沮丧的。所以所有的穿越小说都是穿越到过去，而鲜有穿越到未来的。
作为这样一个各方面的“盲人”，我们可能只能去做些体力活，这对大部分睡到未来的人是不可接受的。</p>

<p>我们假设未来的科技可以给你一副健康的身体，并且也可以去除交流的障碍。这时应该做的是马上学习未来的基础知识，只要有老师以及
适当的自学能力，花个几年还有希望赶上大部队。不过，这几年还是得想办法支付生活费和学费。
就算这样完成了，也只是在未来当一个普通人而已。作为现代社会精英的你，肯定不干。</p>

<h4>4. 临睡前的准备</h4>

<p>为了避免睡到未来端盘子，临睡前的准备很重要。
需要给自己在未来准备足够的社会关系和社会资源。</p>

<ol>
<li><p>给自己的后代做好交代。期望将来自己的曾曾曾&hellip;孙子罩着自己。这个风险随着沉睡的时间而显著增长。</p></li>
<li><p>给自己准备好足够多的钱。但是钱是什么，什么钱在未来还值“钱”？现金，债卷，不动产，稀有金属，稀缺资源，等等，
这些在未来都不能保证还值钱。可能找个谁都不知道的地方，存一些现代的小玩意，在未来当古董还靠谱些。
就算找个基金或者信托可以帮助你在沉睡期间理财，然后在醒来后使用。
但同样需要承受公司倒闭或者在未来缺乏法律效力等风险。</p></li>
</ol>


<p>总体来看，沉睡的人不仅仅承受未来科技能否让你顺利醒来的风险，还有
资产贬值的风险， 未来实际生活水平低下的风险。 虽然时间可以把科技方面的风险降到比想象的低，
但是随着科技进步，时间也使你未来生活能力的风险显著提高。
相比之下，Alcor等组织收的钱也不算低。</p>

<p>最后希望现在沉睡的人们睡得安稳，谷奈。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/26/reliable-voronoi-implementation/">Reliable Fortune's Algorithm Implementation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-26T19:30:06+00:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:30 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p style="text-align:center;"><img src="https://upload.wikimedia.org/wikipedia/commons/0/0c/Fortunes-algorithm-slowed.gif" alt="Wiki" /></p>

<p>Fortune&rsquo;s algorithm is a sweep line algorithm for generating
a Voronoi diagram from a set of points in a plane using \(O(n log n)\) time and \(O(n)\) space
[<a href="https://en.wikipedia.org/wiki/Fortune%27s_algorithm">Wiki</a>].</p>

<p>I have one subtask that need to generate a Voronoi diagram for 24 million vertices in the USA road network.
As far as I tested, many Fortune&rsquo;s algorithm implementations online are not reliable.
They may be OK to generate the Voronoi diagram from random points, but sometimes shitty
to process the points that are concyclic.
For example, few of them can solve the simple case even for 4 points,
$$(0,0), (0,1), (1,0), (1,1)$$
On the other hand, some implementations that can pass my small test cases still face the speed problem
for 24 million vertices.</p>

<p>Finally, I recommand three implementations:</p>

<h2>Boost.Polygon Voronoi</h2>

<p>A little ashamed that I did not know Boost has also implemented Voronoi. It is the last implementation I tried,
but I should recommand it first since it is super easy to use.
Here is the Boost Voronoi
<a href="http://www.boost.org/doc/libs/1_54_0/libs/polygon/doc/voronoi_main.htm">Main Page</a> and
<a href="http://www.boost.org/doc/libs/1_54_0/libs/polygon/doc/voronoi_benchmark.htm">Benchmark</a> compared with CGAL and S-Hull
(related to qhull)
As the Benchmark said,</p>

<ul>
<li>Boost.Polygon Voronoi - implements sweep-line algorithm.</li>
<li>CGAL - implements incremental algorithm.</li>
<li>S-Hull - S-Hull is a <strong>non-robust implementation</strong> of the sweep-hull algorithm used to construct Delaunay triangulation of a set of points.</li>
</ul>


<p>Using Boost Voronoi, my Voronoi computation for 24 million road vertices just speeds around 10 mins. Here is my simple code after
install <code>libboost-dev</code> in Ubuntu Software Center. Note that in the output of this code, every Voronoi edge will be reported twice.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="cp">#include &quot;boost/polygon/voronoi.hpp&quot;</span>
</span><span class='line'><span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">using</span> <span class="k">namespace</span> <span class="n">boost</span><span class="o">::</span><span class="n">polygon</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">typedef</span> <span class="kt">double</span> <span class="n">coordinate_type</span><span class="p">;</span>
</span><span class='line'><span class="k">typedef</span> <span class="n">point_data</span><span class="o">&lt;</span><span class="n">coordinate_type</span><span class="o">&gt;</span> <span class="n">Point</span><span class="p">;</span>
</span><span class='line'><span class="k">typedef</span> <span class="n">voronoi_diagram</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">VD</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">points</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//    points.push_back(Point(0, 0));</span>
</span><span class='line'><span class="c1">//    points.push_back(Point(1, 0));</span>
</span><span class='line'><span class="c1">//    points.push_back(Point(0, 1));</span>
</span><span class='line'><span class="c1">//    points.push_back(Point(1, 1));</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
</span><span class='line'>  <span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">y</span><span class="p">;</span>
</span><span class='line'>      <span class="n">points</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">));</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="n">VD</span> <span class="n">vd</span><span class="p">;</span>
</span><span class='line'>  <span class="n">construct_voronoi</span><span class="p">(</span><span class="n">points</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">points</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">vd</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="n">VD</span><span class="o">::</span><span class="n">const_edge_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">vd</span><span class="p">.</span><span class="n">edges</span><span class="p">().</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">vd</span><span class="p">.</span><span class="n">edges</span><span class="p">().</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">is_primary</span><span class="p">())</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">is_finite</span><span class="p">())</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>              <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;(&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex0</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex0</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;) --- (&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex1</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex1</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;)&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">Point</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">cell</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">source_index</span><span class="p">()];</span>
</span><span class='line'>                <span class="n">Point</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">twin</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">cell</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">source_index</span><span class="p">()];</span>
</span><span class='line'>                <span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
</span><span class='line'>                <span class="n">Point</span> <span class="n">direction</span><span class="p">;</span>
</span><span class='line'>                <span class="n">coordinate_type</span> <span class="n">koef</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>                <span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">((</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">())</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">);</span>
</span><span class='line'>                <span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">((</span><span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">())</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">);</span>
</span><span class='line'>                <span class="n">direction</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">());</span>
</span><span class='line'>                <span class="n">direction</span><span class="p">.</span><span class="n">y</span><span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">());</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex0</span><span class="p">()</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
</span><span class='line'>                    <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;(&quot;</span><span class="o">&lt;&lt;</span>  <span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">direction</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">koef</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">direction</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">*</span> <span class="n">koef</span><span class="o">&lt;&lt;</span><span class="s">&quot;) --- &quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>                <span class="k">else</span><span class="p">{</span>
</span><span class='line'>                  <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;(&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex0</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex0</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;)  --- &quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex1</span><span class="p">()</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
</span><span class='line'>                    <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;(&quot;</span><span class="o">&lt;&lt;</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">direction</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">koef</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="n">direction</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">*</span> <span class="n">koef</span><span class="o">&lt;&lt;</span><span class="s">&quot;)&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>                <span class="k">else</span><span class="p">{</span>
</span><span class='line'>                  <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;(&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex1</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">vertex1</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&quot;)&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>CGAL library</h2>

<p>As mentioned by Boost Voronoi, CGAL implements incremental algorithm.
The obscurest thing of CGAL is the compiling process.</p>

<p>It is better to use <code>cmake</code> to link your program to CGAL libraries as follows.</p>

<ol>
<li><p>Install <code>libcgal-dev</code> and <code>libcgal-demo</code> in Ubuntu Software Center. I think it should automatically install Boost C++ libraries as well.
If not, you need to install <code>libboost-dev</code> in Ubuntu Software Center.</p></li>
<li><p>In order to compile your program correctly, you&rsquo;d better to generate <code>CMakeLists.txt</code> by running <code>cgal_create_cmake_script</code> command
in Terminal. In particular, you should run the following commands in your program folder:</p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="n">cgal_create_cmake_script</span>   <span class="err">#</span><span class="n">generate</span> <span class="n">CMakeLists</span><span class="p">.</span><span class="n">txt</span>
</span><span class='line'><span class="n">cmake</span> <span class="p">.</span>                    <span class="err">#</span><span class="n">generate</span> <span class="n">Makefile</span><span class="p">,</span> <span class="n">CMakeFiles</span> <span class="n">folder</span><span class="p">,</span> <span class="n">and</span> <span class="n">two</span> <span class="n">extra</span> <span class="n">files</span>
</span><span class='line'><span class="n">make</span>                       <span class="err">#</span><span class="n">automatically</span> <span class="n">compile</span> <span class="n">your</span> <span class="p">.</span><span class="n">cpp</span> <span class="n">files</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Brad Barber&rsquo;s Qhull program</h2>

<p><a href="http://www.qhull.org/">Qhull</a> is also easy to use. Just download and decompressed the package, and then <code>make</code> it.
The examples of Qhull are clear. <code>rbox</code> command can generate the example input format, and then use <code>qvoronoi</code>
to compute Voronoi diagram.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/21/how-to-define-accessibility/">Accessibility Metric</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-21T18:47:49+00:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>6:47 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><div align="middle">
<iframe width="560" height="315" src="https://www.youtube.com/embed/fxxDzLNGeoU" frameborder="0" allowfullscreen></iframe>
</div>


<h3>Notes</h3>

<ul>
<li><p>State Smart Transportation Initiative (<a href="http://www.ssti.us">SSTI</a>)</p></li>
<li><p>Example: how many jobs can be accessed within X minutes by bus/transit/auto. We can draw an accessibility intensity distribution.
Furthermore, draw the intensity distribution every minute varying the traffic from 7am-9am, and then average them to get
the picture about accessibility in traffic.</p></li>
<li><p>$$
Accessibility~Score = \sum \frac{Opportunities}{Travel~Time \times Decay}
$$
where: <strong>Opportunities</strong> is number of jobs (or something), <strong>Decay</strong> is the factor reflecting decrease in value of opportunity that
are further away, which is different for each travel model.</p></li>
<li><p>Problem about analytic tool support:</p>

<blockquote><p>Existing tools lack sensitivity for complex planning and programming needs.</p></blockquote></li>
<li><p>NCHRP 8-78 Accessibility Model => Multimodel accessibility (MMA). These new tools can be stand-alone scenario planning tools or to <strong>supplement state/MPO TAZ model</strong>.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/20/how-to-build-blog/">快速搭建Github Page个人博客</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-20T14:53:32+00:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:53 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>继“Hello World”后，整理下搭建本Blog的过程，顺便练练手。网上已经有很多相关的教程，
所以很多地方不再赘述，以引用和个人碰到的问题为主。</p>

<p>本博客使用到的工具有Cloud9 (云端编写环境），Github（云端服务器）以及Octopress模板。
由于以下所有的工具和命令都可以在游览器上完成，所以理论上在任何一台电脑上都可以完成搭建任务。
为什么要选择Github Page的文章很多，比如<a href="http://www.jtianling.com/write-blog-with-jekyll-and-github-page.html">这里</a>。</p>

<hr />

<h3>1. Ruby环境</h3>

<p>由于Octopress基于Jekyll，所以需要本地安装Ruby。安装Ruby RVM环境或许会让人感觉困扰，尤其是windows用户。即使是linux用户，如果source.list里面有任何地址导致<code>apt-get update</code> 命令出现error，
<code>gem</code> 和 <code>bundle install</code> 命令也会拒绝安装。这就是云平台的优势了。</p>

<p>创建Cloud9的账户，然后新建一个workspace, template 设为 &ldquo;Ruby on Rails Tutorial"。于是所有本地需要的tools都已装好。
接下来在你Cloud9的workspace中打开 Terminal 开始输命令，来自 <a href="http://qjpcpu.github.io/blog/2014/08/31/shi-yong-octopressda-jian-github-pages/">这里</a>:</p>

<pre><code>git clone git://github.com/imathis/octopress.git octopress
cd octopress
bundle install
rake install
</code></pre>

<h3>2. Octopress+Github</h3>

<p>Octopress已经可以了。这时需要在Github里新建一个名为<code>username.github.io</code>的空Repo，请设置为public。
然后回到Cloud9开始初始化博客，这里Octopress会自动连接上你刚刚新建的Repo。</p>

<pre><code>rake setup_github_pages
</code></pre>

<p>编辑生成了<code>_config.yml</code>和<code>Rakefile</code>, 除了博客以外，以后基本上只需要设置和修改这两个文件。
首先在<code>_config.yml</code>中写入博客名和其他信息（前面一些基本信息），开始写第一篇博客：</p>

<pre><code>rake new_page["About"]    # 添加博客页
rake new_post["Hello World"]  # 新建一篇文章
</code></pre>

<p>添加deploy.sh，以后一键运行发布到Github：</p>

<figure class='code'><figcaption><span>deploy.sh </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rake generate      <span class="c"># 生成页面</span>
</span><span class='line'><span class="c">#rake preview      # 如果需要在本地预览生成的结果，预览页http://localhost:4000 </span>
</span><span class='line'>rake deploy        <span class="c"># 发布到Github中的master分支，即username.github.io真正看到的</span>
</span><span class='line'><span class="c"># 发布源文件到Github的source分支</span>
</span><span class='line'>git add .
</span><span class='line'>git commit -m <span class="s1">&#39;Added About page and first post!&#39;</span>
</span><span class='line'>git push origin <span class="nb">source</span>
</span></code></pre></td></tr></table></div></figure>


<p>以后每次新建一个post，然后在<code>octopress/source/_posts/</code> 下书写markdown，发布即可。
如果要在Clou9本地生成预览结果，需要稍微修改一下<code>Rakefile</code>文件。</p>

<pre><code>#server_port     = "4000"      # port for preview server eg. localhost:4000
server_host     = ENV['IP'] ||= '0.0.0.0'     # server bind address for preview server
server_port     = ENV['PORT'] ||= "8080"      # port for preview server eg. localhost:4000

#rackupPid = Process.spawn("rackup --port #{server_port}")
rackupPid = Process.spawn("rackup --host #{server_host} --port #{server_port}")
</code></pre>

<p>然后输入<code>rake preview</code>命令后即可本地即时编辑查看，开启服务后，外部游览器访问地址为：</p>

<blockquote><p><a href="https://workspacename-username.c9.io/">https://workspacename-username.c9.io/</a></p></blockquote>

<p>其中，workspacename是你创建该Clou9 workspace时输入的名字， username是你Clou9的用户名。</p>

<h3>3. 主题和插件</h3>

<p>Jekyll和Octopress是类似于Wordpress的平台，可以安装任意主题(Themes)和插件(Plugins)。</p>

<ol>
<li>Jekyl推荐主题在<a href="http://jekyllthemes.org/">这里</a>, 还有各种站点在<a href="https://github.com/jekyll/jekyll/wiki/Sites">这里</a>。</li>
<li>Octopress推荐主题在这里<a href="https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes">这里</a>, 附带安装命令。这里用的是<code>whitespace</code>主题。</li>
</ol>


<p>插件方面我用了</p>

<ul>
<li><p>Disqus: 用来添加评论功能。在Disqus创建好账号后点击<code>Settings</code>，点击<code>Add Disqus to Site</code>，就可以为个人博客站点创建一个<code>short name</code>，把它添加到<code>_config.yml</code>中的<code>disqus_short_name</code>后面即可。</p></li>
<li><p>Google Analytics: 在Google Analytics中获取跟踪ID，添加到<code>_config.yml</code>中的<code>google_analytics_tracking_id</code>。</p></li>
<li><p>分类，标签以及3D标签云： 参考了<a href="http://812lcl.com/blog/2013/10/26/octopressce-bian-lan-ji-ping-lun-xi-tong-ding-zhi/">文章1</a>
和<a href="http://agiledon.github.io/blog/2013/01/08/create-tag-for-octopress/">文章2</a>。两篇文章其实是做的同样的事情。
文章1比较简单明了，但遗漏了一些东西，文章2做了相印的补充。</p></li>
</ul>


<p>我陆续碰到了如下问题：</p>

<ol>
<li><code>category_generator.rb</code>直接用自带的，不用替换。</li>
<li>缺<code>source/_layouts/tag_index.html</code>。 解决方法： 新建<code>tag_index.html</code>, 复制<code>category_index.html</code>的代码。把categories改成tags, 把category改成tag。</li>
<li>缺<code>source/_includes/custom/tag_feed.xml</code>。解决方法： 新建<code>tag_feed.xml</code>, 复制<code>category_feed.xml</code>的代码。把categories改成tags, 把category改成tag。</li>
<li>缺<code>source/javascripts/tagcloud.swf</code>。 解决方法：在<a href="https://github.com/shangfu/shangfu.github.io/tree/source/source/javascripts">这里</a> 把<code>tagcloud.swf</code> 下载下来，并且放到对应目录。</li>
</ol>


<p>另外由于我的主题没有设置边栏(asides)，所以我新建了一个page, named category, 来显示categories和tags的结果。</p>

<figure class='code'><figcaption><span>category/index.markdown </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>---
</span><span class='line'>layout: page
</span><span class='line'>title: &quot;category&quot;
</span><span class='line'>comments: false
</span><span class='line'>sharing: false
</span><span class='line'>footer: true
</span><span class='line'>---
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&#39;Category-cloud&#39;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;style&gt;</span>
</span><span class='line'>    <span class="nf">#left</span><span class="o">,</span><span class="nf">#right</span> <span class="p">{</span><span class="k">float</span><span class="o">:</span><span class="k">left</span><span class="p">;</span> <span class="k">width</span><span class="o">:</span><span class="m">400px</span><span class="p">}</span>
</span><span class='line'>    <span class="nt">&lt;/style&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;main&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>             <span class="nt">&lt;h1&gt;</span>Category List<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>             <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                 {% category_list %}
</span><span class='line'>             <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;h1&gt;</span>Tag List<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;tag-cloud&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                {% tag_list font-size: 90-210%, limit: 10, style: para %}
</span><span class='line'>            <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;clear:both&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;style&gt;</span>
</span><span class='line'>    <span class="nf">#left</span><span class="o">,</span><span class="nf">#right</span> <span class="p">{</span><span class="k">float</span><span class="o">:</span><span class="k">left</span><span class="p">;</span> <span class="k">width</span><span class="o">:</span><span class="m">400px</span><span class="p">}</span>
</span><span class='line'>    <span class="nt">&lt;/style&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;main&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;h1&gt;</span>Category Cloud<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;category-cloud&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                {% category_cloud bgcolor:#f2f2f2 %}
</span><span class='line'>            <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;h1&gt;</span>Tag Cloud<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>            <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;Tag-cloud&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                {% tag_cloud bgcolor:#f2f2f2 %}
</span><span class='line'>            <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;clear:both&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Bug</h3>

<p>在添加超过一个tags之后，<code>rake generate</code>可能会开始报错了</p>

<blockquote><p>Liquid Exception: comparison of Array with Array failed in page</p></blockquote>

<p>解决办法是在 <code>plugins/tag_list.rb</code> 中修改代码：</p>

<figure class='code'><figcaption><span>plugins/tag_list.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="n">weighted</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">count</span><span class="o">|</span>
</span><span class='line'>  <span class="c1"># logarithmic distribution</span>
</span><span class='line'><span class="c1">#  weight = (Math.log(count) - Math.log(min))/(Math.log(max) - Math.log(min))</span>
</span><span class='line'>   <span class="k">if</span> <span class="n">min</span> <span class="o">==</span> <span class="n">max</span>   <span class="c1">#ADDED</span>
</span><span class='line'>      <span class="n">weight</span> <span class="o">=</span> <span class="mi">1</span>    <span class="c1">#ADDED</span>
</span><span class='line'>   <span class="k">else</span>            <span class="c1">#ADDED</span>
</span><span class='line'>      <span class="n">weight</span> <span class="o">=</span> <span class="p">(</span><span class="no">Math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">-</span> <span class="no">Math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">min</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="no">Math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">max</span><span class="p">)</span> <span class="o">-</span> <span class="no">Math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">min</span><span class="p">))</span> <span class="c1">#ADDED</span>
</span><span class='line'>   <span class="k">end</span>             <span class="c1">#ADDED</span>
</span><span class='line'>  <span class="o">[</span><span class="nb">name</span><span class="p">,</span> <span class="n">weight</span><span class="o">]</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5. 开始使用</h3>

<p>以上都做完后，终于可以轻松地写博客了。
每次<code>rake new_post[""]</code>新建一个post。
运行 <code>rake preview</code>, 一边编写markdown内容一边查看。
添加category和tags，比如</p>

<pre><code>---
layout: post
title: "快速搭建Github Page个人博客"
date: 2015-08-20 14:53:32 +0000
comments: true
categories: Technic
tags: [Blog, Cloud9, Github, Octopress]
---
</code></pre>

<p>最后运行我们直接写好的<code>deploy.sh</code>发布到github。</p>

<h3>4. 域名绑定</h3>

<p>Github 提供了CNAME域名绑定。在Namesilo 上注册帐号，然后进入Manage My Domains, 选择域名后，进入 DNS Records UPDATE。</p>

<ol>
<li>新建A类解析，<code>HOSTNAME</code> 留空， IPV4 address 设为 <code>ping username.github.io</code> 返回的ip即可。</li>
<li>新建CNAME解析， <code>HOSTNAME</code> 设为 <code>www</code>，<code>TARGET HOSTNAME</code> 设为你的<code>username.github.io</code>。</li>
<li>在你的<code>octopress/source/</code>目录下，新建文件<code>CNAME</code>, 在该文件第一行写上你的域名，如<code>whyalgorithm.com</code>，保存。然后运行 <code>deploy.sh</code> 上传到github。
脚本会自动把<code>CNAME</code> 文件复制到<code>octopress/_deploy</code>目录下，并上传到github master 分支中。</li>
<li>耐心等待一会儿。</li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - WhyAlgorithm -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'whyalgorithm';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
